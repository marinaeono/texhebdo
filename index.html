<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Connexion – Texhebdo</title>
  <link rel="stylesheet" href="login.css">
</head>

<body>

  <!-- TÊTE DE LA CHÈVRE -->
  <div class="goat-head">
    <img id="goatHead" src="chevre/chevre1.png" alt="Tête de chèvre">
  </div>

  <!-- BULLE + FLASH + POUSSIÈRE -->
  <div id="speechBubble" class="speech-bubble"></div>
  <div id="flash" class="flash-effect"></div>
  <div id="dust" class="dust-effect"></div>

  <!-- CONTAINER -->
  <div class="login-box">

    <h1>Bienvenue sur le site TEXHEBDO</h1>

    <p class="subtitle">Saisir le mot de passe</p>

    <form onsubmit="return checkPassword()">
      <input type="password" id="password" placeholder="Mot de passe" required>
      <button type="submit">Valider</button>
    </form>

    <p class="hint"></p>

  </div>

  <!-- SABOTS DE LA CHÈVRE -->
  <div class="goat-feet">
    <img id="goatFeet" src="chevre/sabots1.png" alt="Sabots de chèvre">
  </div>

<script>
function checkPassword() {
  const goodPassword = "gavrinis";
  const input = document.getElementById("password").value;

  const head = document.getElementById("goatHead");
  const feet = document.getElementById("goatFeet");
  const bubble = document.getElementById("speechBubble");
  const flash = document.getElementById("flash");
  const dust = document.getElementById("dust");

  /* MOT DE PASSE CORRECT */
  if (input === goodPassword) {

    // Expression heureuse
    head.src = "chevre/chevre1.png";
    feet.src = "chevre/sabots1.png";

    // Message taquin breton
    bubble.textContent = "Hopala ! Même un goéland n’aurait pas fait mieux, bravo le champion !";
    bubble.style.display = "block";

    // Animation POP
    bubble.classList.remove("pop");
    void bubble.offsetWidth;
    bubble.classList.add("pop");

    // FLASH
    flash.classList.remove("flashGo");
    void flash.offsetWidth;
    flash.classList.add("flashGo");

    // POUSSIÈRE
    dust.classList.remove("dustGo");
    void dust.offsetWidth;
    dust.classList.add("dustGo");

    // Redirection après 3 secondes
    setTimeout(() => {
      window.location.href = "accueil.html";
    }, 3000);

    return false;
  }

  /* MOT DE PASSE INCORRECT */
  const wrongMessages = [
    "Houlà… t’es sûr que t’as pas les sabots à l’envers ?",
    "Nenni ! Même une vieille chèvre de Plouha taperait mieux que ça !",
    "Oh bah non hein… c’est pas le bon, mon p’tit goémon !",
    "Essaie encore, vaillant mousse ! Là t’es passé à côté comme un crabe bourré.",
    "Ah bah bravo… si tu vises comme ça à la pêche, tu reviens bredouille !"
  ];

  bubble.textContent = wrongMessages[Math.floor(Math.random() * wrongMessages.length)];
  bubble.style.display = "block";

  bubble.classList.remove("pop");
  void bubble.offsetWidth;
  bubble.classList.add("pop");

  flash.classList.remove("flashGo");
  void flash.offsetWidth;
  flash.classList.add("flashGo");

  dust.classList.remove("dustGo");
  void dust.offsetWidth;
  dust.classList.add("dustGo");

  // Chèvre aléatoire
  const total = 5;
  const randomIndex = Math.floor(Math.random() * total) + 1;

  head.src = "chevre/chevre" + randomIndex + ".png";
  feet.src = "chevre/sabots" + randomIndex + ".png";

  return false;
}
</script>

</body>
</html>

