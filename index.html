
<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Connexion – Texhebdo</title>
  <link rel="stylesheet" href="login.css">
</head>

<body>

  <!-- TÊTE DE LA CHÈVRE -->
  <div class="goat-head">
    <img id="goatHead" src="chevre/chevre1.png" alt="Tête de chèvre">
  </div>

  <!-- BULLE + FLASH + POUSSIÈRE -->
  <div id="speechBubble" class="speech-bubble"></div>
  <div id="flash" class="flash-effect"></div>
  <div id="dust" class="dust-effect"></div>

  <!-- CONTAINER -->
  <div class="login-box">

    <h1>Bienvenue sur le site TEXHEBDO</h1>

    <p class="subtitle">Saisir le mot de passe</p>

    <form onsubmit="return checkPassword()">
      <input type="password" id="password" placeholder="Mot de passe" required>
      <button type="submit">Valider</button>
    </form>

    <p class="hint"></p>

  </div>

  <!-- SABOTS DE LA CHÈVRE -->
  <div class="goat-feet">
    <img id="goatFeet" src="chevre/sabots1.png" alt="Sabots de chèvre">
  </div>

<script>
/* SONS */
const soundError = new Audio("sons/beeh.mp3");
const soundSuccess = new Audio("sons/super.mp3");

function checkPassword() {
  const goodPassword = "lmmaegavrinis";
  const input = document.getElementById("password").value;

  const head = document.getElementById("goatHead");
  const feet = document.getElementById("goatFeet");
  const bubble = document.getElementById("speechBubble");
  const flash = document.getElementById("flash");
  const dust = document.getElementById("dust");

  /* LISTES DE MESSAGES */
  const successMessages = [
    "Mot de passe correct !",
    "Bien joué !",
    "Tu peux entrer.",
    "Accès autorisé.",
    "C’est le bon mot de passe !",
    "La chèvre t’admire.",
    "Tu es un génie du mot de passe."
  ];

  const errorMessages = [
    "Mauvais mot de passe !",
    "Le mot de passe est plein d'humour",
    "Non, ce n’est pas ça.",
    "Ce n'est pas le bon mot de passe…",
    "Mot de passe incorrect.",
    "La chèvre te juge car ce n'est pas le bon mot passe.",
    "Hmm… tu peux mieux faire."
  ];

  /* MOT DE PASSE CORRECT */
  if (input === goodPassword) {

    // Son de réussite
    soundSuccess.currentTime = 0;
    soundSuccess.play();

    // Message aléatoire
    bubble.textContent = successMessages[Math.floor(Math.random() * successMessages.length)];

    // Styles de bulles aléatoires
    const bubbleStyles = ["bubble1", "bubble2", "bubble3"];
    bubble.classList.remove("bubble1", "bubble2", "bubble3");
    const randomBubble = bubbleStyles[Math.floor(Math.random() * bubbleStyles.length)];
    bubble.classList.add(randomBubble);

    // Bulle plus grande
    bubble.classList.add("bigBubble");

    bubble.style.display = "block";

    // Chèvre heureuse
    head.src = "chevre/chevre1.png";
    feet.src = "chevre/sabots1.png";

    // Animation rigolote : la chèvre saute
    head.classList.add("goatJump");
    feet.classList.add("goatJump");

    // Animations existantes
    bubble.classList.remove("pop");
    void bubble.offsetWidth;
    bubble.classList.add("pop");

    flash.classList.remove("flashGo");
    void flash.offsetWidth;
    flash.classList.add("flashGo");

    dust.classList.remove("dustGo");
    void dust.offsetWidth;
    dust.classList.add("dustGo");

    // Redirection après 5 secondes
    setTimeout(() => {
      window.location.href = "accueil.html";
    }, 5000);

    return false;
  }

  /* MOT DE PASSE INCORRECT */

  // Son d’erreur
  soundError.currentTime = 0;
  soundError.play();

  bubble.textContent = errorMessages[Math.floor(Math.random() * errorMessages.length)];
  bubble.style.display = "block";

  // Retirer la bulle géante si elle était active
  bubble.classList.remove("bigBubble");

  bubble.classList.remove("pop");
  void bubble.offsetWidth;
  bubble.classList.add("pop");

  flash.classList.remove("flashGo");
  void flash.offsetWidth;
  flash.classList.add("flashGo");

  dust.classList.remove("dustGo");
  void dust.offsetWidth;
  dust.classList.add("dustGo");

  // Chèvre aléatoire (1 à 5)
  const total = 5;
  const randomIndex = Math.floor(Math.random() * total) + 1;

  head.src = "chevre/chevre" + randomIndex + ".png";
  feet.src = "chevre/sabots" + randomIndex + ".png";

  return false;
}
</script>

</body>

</html>
