<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Connexion – Texhebdo</title>
  <link rel="stylesheet" href="login.css">
</head>

<body>

  <!-- TÊTE DE LA CHÈVRE -->
  <div class="goat-head">
    <img id="goatHead" src="chevre/chevre1.png" alt="Tête de chèvre">
  </div>

  <!-- BULLE + FLASH + POUSSIÈRE -->
  <div id="speechBubble" class="speech-bubble"></div>
  <div id="flash" class="flash-effect"></div>
  <div id="dust" class="dust-effect"></div>

  <!-- CONTAINER -->
  <div class="login-box">

    <h1>Bienvenue sur le site TEXHEBDO</h1>

    <p class="subtitle">Saisir le mot de passe</p>

    <form onsubmit="return checkPassword()">
      <input type="password" id="password" placeholder="Mot de passe" required>
      <button type="submit">Valider</button>
    </form>

    <p class="hint"></p>

  </div>

  <!-- SABOTS DE LA CHÈVRE -->
  <div class="goat-feet">
    <img id="goatFeet" src="chevre/sabots1.png" alt="Sabots de chèvre">
  </div>

  <!-- SONS -->
  <audio id="soundBeeh" src="son/bee.mp3"></audio>
  <audio id="soundRigolo" src="son/rigolo.mp3"></audio>

<script>

// Index pour la boucle des chèvres incorrectes
let goatIndex = 0;
// Liste des chèvres autorisées en cas d’erreur
const goatList = [2, 3, 4];

function checkPassword() {
  const goodPassword = "gavrinis";
  const input = document.getElementById("password").value;

  const head = document.getElementById("goatHead");
  const feet = document.getElementById("goatFeet");
  const bubble = document.getElementById("speechBubble");
  const flash = document.getElementById("flash");
  const dust = document.getElementById("dust");

  // Sons
  const soundBeeh = document.getElementById("soundBeeh");
  const soundRigolo = document.getElementById("soundRigolo");

  /* MOT DE PASSE CORRECT */
  if (input === goodPassword) {

    // Son rigolo
    soundRigolo.currentTime = 0;
    soundRigolo.play();

    // Expression heureuse → chèvre 1
    head.src = "chevre/chevre1.png";
    feet.src = "chevre/sabots1.png";

    // Message taquin
    bubble.textContent = "Bêêêh bravo... C'est le bon mot de passe";
    bubble.style.display = "block";

    // Animation POP
    bubble.classList.remove("pop");
    void bubble.offsetWidth;
    bubble.classList.add("pop");

    // FLASH
    flash.classList.remove("flashGo");
    void flash.offsetWidth;
    flash.classList.add("flashGo");

    // POUSSIÈRE
    dust.classList.remove("dustGo");
    void dust.offsetWidth;
    dust.classList.add("dustGo");

    // Redirection après 3 secondes
    setTimeout(() => {
      window.location.href = "accueil.html";
    }, 3000);

    return false;
  }

  /* MOT DE PASSE INCORRECT */

  // Son "beeeh"
  soundBeeh.currentTime = 0;
  soundBeeh.play();

  const wrongMessages = [
    "Bêêê... Ce n'est pas le bon mot de passe",
    "Pas le mot de passe là non plus",
    "Mauvais mot de passe : on dirait que tu tapes au hasard",
    "Ahah, joli essai... mais non, ce n'est pas le mot de passe",
    "Oups... ce n'est pas le bon mot de passe"
  ];

  bubble.textContent = wrongMessages[Math.floor(Math.random() * wrongMessages.length)];
  bubble.style.display = "block";

  bubble.classList.remove("pop");
  void bubble.offsetWidth;
  bubble.classList.add("pop");

  flash.classList.remove("flashGo");
  void flash.offsetWidth;
  flash.classList.add("flashGo");

  dust.classList.remove("dustGo");
  void dust.offsetWidth;
  dust.classList.add("dustGo");

  // Chèvre en boucle : 2 → 3 → 4 → 2 → ...
  goatIndex = (goatIndex + 1) % goatList.length;
  const current = goatList[goatIndex];

  head.src = "chevre/chevre" + current + ".png";
  feet.src = "chevre/sabots" + current + ".png";

  return false;
}

</script>

</body>
</html>

